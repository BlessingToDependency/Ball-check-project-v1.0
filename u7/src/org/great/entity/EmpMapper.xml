<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN"      
 "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd"> 
 
<mapper namespace="org.great.mapper.EmpMapper">
	<select id="findAll" resultType="org.great.entity.Emp">
		select * from emp
	</select>

	<!-- if -->
	<select id="findByDept" parameterType="org.great.tools.Condition"
		resultType="org.great.entity.Emp">
		select * from emp  
		<if test="deptno!=null">
			where deptno = #{deptno}
		</if>
	</select>
	<!-- choose -->
	<select id="findBySalary" parameterType="org.great.tools.Condition"
		resultType="org.great.entity.Emp">
		select * from emp  
		<choose> 
			<when test="isHigh==true">
				where sal &gt;3500
			</when>
			
		</choose>
	</select>
	<!-- where -->
	<select id="findByDeptAndSalary" parameterType="org.great.tools.Condition"
		resultType="org.great.entity.Emp">
		select * from emp 
		<where>
			<if test="deptno!=null"> and deptno=#{deptno}</if>
			<if test="salary!=null"> and sal>#{salary}</if>
		</where>
	</select>
	<!-- set -->
	<update id="update" parameterType="org.great.entity.Emp">
	update emp 
	<set>
	<if test="ename!=null">ename=#{ename},</if>
	<if test="job!=null">job=#{job},</if>
	</set>
	where empno=#{empno}
	</update>

<!-- trim替换where -->
	<!-- where -->
	<select id="findByDeptAndSalary2" parameterType="org.great.tools.Condition"
		resultType="org.great.entity.Emp">
		select * from emp 
<!--  		<where>
			<if test="deptno!=null"> and deptno=#{deptno}</if>
			<if test="salary!=null"> and sal>#{salary}</if>
		    </where>--> 
		    <trim prefix="where" prefixOverrides="and">
		   	<if test="deptno!=null"> and deptno=#{deptno}</if>
			<if test="salary!=null"> and sal>#{salary}</if>
		    </trim>
	</select>
	
<!-- trim代替set -->	
	<update id="update2" parameterType="org.great.entity.Emp">
	update emp
<!--<set>
	<if test="ename!=null">ename=#{ename},</if>
	<if test="job!=null">job=#{job},</if>
	</set> --> 
	<trim prefix="set" suffixOverrides=",">
		<if test="ename!=null">ename=#{ename},</if>
		<if test="job!=null">job=#{job},</if>
	</trim>
	where empno=#{empno}
	</update>
	
	<!-- foreach -->
	<!-- 根据多个ID查询员工 -->
	<select id="findByIds" parameterType="org.great.tools.Condition"
	resultType="org.great.entity.Emp">
		select * from emp where empno in 
	<foreach collection="empnos" item="id" open="(" separator="," close=")">
	   #{id}
	</foreach>
	</select>
</mapper>
 
 
 
 
 
 