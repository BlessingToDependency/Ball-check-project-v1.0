<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN"      
 "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">
 
 <mapper namespace="org.great.mapper.OrderMapper">
 
 	<!-- 套餐设置显示 -->
 	<select id="showMeal" parameterType="java.lang.String"  resultType="org.great.bean.SetmealBean">			
 		select b.*, rownum from 
		(select a.*,rownum rn  from 
		(select * from  tblsetmeal  	
		<where>
		     <if test="setmeal!=null and setmeal !=''" >   setmeal like concat(concat('%',#{setmeal}),'%') order by  setmeal desc   </if>
		</where>
		) a 
		where rownum &lt;= (#{currentPage} * #{pagecount})  )b  where rn &gt;= ((#{currentPage}-1)*#{pagecount}+1)
 	</select>
 	
 	<!-- 套餐计算总页数 -->
 	<select id="totalPage" parameterType="java.lang.String" resultType="java.lang.Integer">
 		select count(*) from (select * from  tblsetmeal   
 		<where>
		     <if test="setmeal!=null and setmeal !=''" >   setmeal like concat(concat('%',#{setmeal}),'%') order by  setmeal desc   </if>
		</where>
		)
 	</select>	
 		
 		
 </mapper>