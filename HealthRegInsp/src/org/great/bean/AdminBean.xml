<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN"      
 "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">
 
 <mapper namespace="org.great.mapper.IAdminMapper">
 		<!-- 后台用户登陆 -->
 		<select id="userLogin" parameterType="org.great.bean.AdminBean" resultType="org.great.bean.AdminBean">
			select * from tblbackstage where adminId=#{adminId} and adminPwd=#{adminPwd}
		</select>
		
		<!-- 新增用户（注册） -->
		<insert id="adminRegister" parameterType="org.great.bean.AdminBean">
			insert into tblbackstage values ("自增长",#{adminPwd},#{adminName},#{age},#{background},#{phone},#{graduated},#{sex},#{postId},#{head},#{depaId},#{roleId},#{stateId},#{logicId})
		</insert>
		
 	     <!-- 修改用户密码 -->	   
 	    <update id="updateAdminPws" >
 	      update tblbackstage set adminPwd=#{adminPwd} where adminId=#{adminId}
 	    </update>
 	  
 	      <!-- 修改医生状态 （禁用，启用）-->
 	      <update id="updateDoctorState" parameterType="org.great.bean.AdminBean">
 	         update tblbackstage set stateId=#{stateId} where adminId={adminId}
 	      </update>
 	
 	      <!-- 逻辑删除医生 -->
 	      <update id="logicDeleteDoc" parameterType="org.great.bean.AdminBean">
 	           update  tblbackstage set logicId=#{logicId}  where adminId={adminId}
 	      </update>
 	      
 	      <!-- 后台对医生信息进行修改 -->
 	      <update id="updateDoctorInfo" parameterType="org.great.bean.AdminBean">
 	            update tblbackstage set background=#{background},phone=#{phone},graduated=#{graduated},postId=#{postId},head=#{head},depaId=#{depaId},roleId=#{roleId} where adminId={adminId}
 	      </update>
 	      
 	      <!-- 查询医生信息 -->
 	        <select id="slectDoctorInfo" parameterType="java.lang.int" resultMap="adminIn">
 	                select t.*,p.post from tblbackstage  t,PostBean p
 	                
 	                
 	                  where adminId=#{adminId}
 	        </select>
 	        
 	        <resultMap type="org.great.bean.AdminBean" id="adminIn">
	    	<id property="adminId" column="adminId"/>
		   <result property="adminName" column="adminName"/>
		   <result property="age" column="age"/>
		   <result property="background" column="background"/>
	       <result property="phone" column="phone"/>
		   <result property="graduated" column="graduated"/>
		   <result property="background" column="background"/>
		  <result property="sex" column="sex"/>
		   <result property="postId" column="postId"/>
		   <result property="head" column="head"/>
		   <result property="depaId" column="depaId"/>
		   <result property="roleId" column="roleId"/>
		   <result property="stateId" column="stateId"/>
		   <result property="logicId" column="logicId"/>
		<association property="postBean" javaType="org.great.bean.PostBean" >
			<id property="postId" column="postId"/>
			<result property="post" column="post"/>
		</association>
		
	</resultMap>
 </mapper>