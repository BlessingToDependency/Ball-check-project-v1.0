<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN"      
 "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">
 <mapper namespace="org.great.mapper.IUserMapper">
 		<!-- 前台用户登陆：通用语句： -->
 		<select id="userLogin" parameterType="org.great.bean.UserBean" resultType="org.great.bean.UserBean">
			select * from TblForeground  
			<where>
				<!-- 公司名 -->
				<if test="company != null and  company !=''">
					and company=#{company}
				</if>
				<!-- 密码 -->
				<if test="pwd != null and  pwd !=''">
					and pwd=#{pwd}
				</if>
			</where>
			
		</select>
		
		<!-- 注册 -->
		<insert id="userRegister" parameterType="org.great.bean.UserBean">

			insert into tblforeground values (TBL_FOREGROUND.Nextval,#{company},#{pwd},#{address},#{contacts},#{phone},#{balance},#{busNum})

		</insert>
		
		<!-- 注册名查重 -->
 		<select id="userRepeat" resultType="org.great.bean.UserBean">
			select company from tblforeground where company=#{company}
		</select>
		
		  <!-- 修改密码 -->
		  <update id="updateUserPws" >
		     update   tblforeground  set pwd=#{pwd} where company=#{company}
		  </update>
 	
 		<!-- 增加账单 -->
 		<insert id="userBill" parameterType="org.great.bean.BillBean" >
 			insert into tblbill values ("自增长",#{companyId},#{ordNum},#{actNum},#{setmealId},#{actCharge},"当前时间")
 		</insert>
 		

 		<!-- 查看公司信息 -->
 		<select id="selectCompInfo" resultType="org.great.bean.UserBean"  parameterType="java.lang.String">
 		    select * from tblforeground where company=#{company}
 		</select>

 		<!-- 获取开单用户列表 -->
 	    <select id="OpenBillUserList" resultType="org.great.bean.UserBean">
			select * from tblforeground 
		</select>

 		<!-- 编辑公司信息 -->
 		  <update id="updateCompInfo" parameterType="java.lang.String">
 		  
 		  </update>
 		
 </mapper>